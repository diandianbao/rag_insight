# 介绍
## Preface | 前言

欢迎阅读《智能体设计模式：构建智能系统的实战指南》。纵观当今人工智能领域，我们能清晰地看到一条演进路线：从简单的响应式程序，到复杂的自主实体，后者能够理解上下文、做出决策，并与所处环境及其他系统进行动态交互。这些，便是智能体以及由它们构成的智能体系统。

强大的大语言模型的问世，为理解和生成类人内容（如文本和媒体）提供了前所未有的能力，并担当了许多这类智能体的认知引擎。然而，要将这些能力编排成能够可靠达成复杂目标的系统，仅仅拥有一个强大的模型是远远不够的。它还需要结构、设计，以及一套经过深思熟虑的方法，来指导智能体如何感知、规划、行动和交互。

不妨将构建智能系统想象成在一块画布上创作复杂的艺术品或工程作品。这块画布并非一块空白的视觉空间，而是指那些为智能体提供生存和操作环境的底层技术设施和框架。它是您构建智能应用所依赖的基石，负责管理状态、通信、工具访问和逻辑流。

想在这块智能体的画布上高效构建，简单地堆砌组件是远远不够的。我们需要掌握一套行之有效的技术，也就是<strong>模式</strong>。这些模式，是专门为了解决智能体设计与实现过程中的常见挑战而存在的。这就像建筑有建筑模式，软件有设计模式一样。最终，智能体设计模式的作用，就是为那些反复出现的老问题提供一套经过验证、可复用的解决方案，帮助你将智能体成功地构建出来。

---
## What are Agentic Systems? | 什么是智能体系统？

从本质上讲，智能体系统是一种计算实体，它能够感知环境（包括数字环境和可能的物理环境），根据感知结果以及预设或学习到的目标做出决策，并自主执行行动以实现目标。与遵循严格逐步指令的传统软件不同，智能体展现出一定的灵活性和主动性。

想象一下，你需要一个系统来管理客户咨询。传统系统可能会遵循固定的脚本。而一个智能体系统则能够感知客户提问的细微差别，访问知识库，与公司其他内部系统（如订单管理系统）交互，还可能提出澄清性问题，并主动解决问题，甚至可能预测客户未来的需求。这些智能体就在您应用程序基础设施这块画布上运行，利用提供给它们的服务和数据。

智能体系统通常具备以下特征：<strong>自主性（Autonomy）</strong>，使其无需持续的人工监督即可行动；<strong>主动性（Proactiveness）</strong>，能主动发起行动以实现其目标；<strong>反应性（Reactiveness）</strong>，能有效应对环境变化。它们以<strong>目标</strong>为导向，持续推进任务。关键能力还包括<strong>工具使用（Tool Use）</strong>，使之能够与外部 API、数据库或服务交互，将触角伸出自身运行环境；它们拥有<strong>记忆（Memory）</strong>，能在多次交互中保留信息，并能与用户、其他系统、乃至在相同或互联的画布上运行的其他智能体进行<strong>通信（Communication）</strong>。

要有效地实现这些特性，会带来巨大的复杂性。智能体如何在它的画布上跨越多个步骤来维持状态？它如何决定何时以及如何使用某个工具？不同智能体之间的通信如何管理？你又该如何在系统中确保可靠性，以处理意外结果或错误？

---
## Why Patterns Matter in Agent Development | 为什么模式在智能体开发中很重要

这种复杂性，恰恰凸显了智能体设计模式的不可或缺。它们并非僵化的规则，而是久经沙场的模板或蓝图，为智能体领域中标准的设计和实现挑战提供了经过验证的方法。通过识别并应用这些设计模式，你将获得一套成熟的解决方案，从而提升你在画布上所构建智能体的结构性、可维护性、可靠性和效率。

使用设计模式可以帮助你避免为管理对话流、集成外部能力或协调多智能体行动等任务「重新发明轮子」。它们提供了一种通用语言和结构，使你的智能体逻辑更清晰，也便于他人（以及未来的你自己）理解和维护。应用专为错误处理或状态管理而设计的模式，能直接帮助你构建更具鲁棒性、更可靠的系统。利用这些成熟的方法可以加速你的开发进程，让你能专注于应用程序的独有之处，而不是智能体行为的基础机制。

本书提炼出 21 个关键设计模式，它们代表了在各种技术画布上构建复杂智能体的基本构建模块和技术。理解并应用这些模式，将极大提升你有效设计和实现智能系统的能力。

---
## Overview of the Book and How to Use It | 本书概览与使用指南

本书《智能体设计模式：构建智能系统的实战指南》旨在成为一本实用且易于上手的资源。其核心重点在于清晰地解释每一种智能体模式，并提供具体、可运行的代码示例来演示其实现。全书用 21 个专章覆盖多种设计模式：从结构化顺序操作（提示链）、外部交互（工具使用）等基础概念，到协同工作（多智能体协作）、自我改进（反思）等进阶主题。

本书按章节组织，每章聚焦一种智能体模式。在每一章中，你都会看到：

- 详细的<strong>模式概述</strong>，清晰解释模式及其在智能体设计中的作用。

- <strong>实际应用和用例</strong>部分，说明模式发挥重要作用的实际场景及其带来的好处。

- <strong>实践代码示例</strong>：提供实用的、可运行的代码，演示如何使用主流的智能体开发框架来实现该模式。在这里，你将看到如何在一个技术框架下应用该模式。

- <strong>核心要点</strong>，总结最关键的内容以便快速回顾。

- <strong>参考资料</strong>，提供用于进一步探索的资源，帮助你更深入地学习该模式及相关概念。

虽然各章节的排序是为了循序渐进地构建概念，但你完全可以将本书作为参考手册，直接跳转到那些能解决你在智能体开发项目中遇到的特定挑战的章节。附录部分全面介绍了高级提示技术、在真实环境中应用 AI 智能体的原则，以及主流智能体框架的概览。作为补充，我们还提供了仅在线上发布的实战教程，逐步指导你如何使用 AgentSpace 等特定平台以及在命令行界面中构建智能体。全书自始至终都强调实际应用；我们强烈鼓励你运行代码示例，动手实验，并将其改造应用于在你选择的画布上构建你自己的智能系统。

我常被问到：「AI 日新月异，为何还要写一本可能很快过时的书？」我的动机恰恰相反：正是因为一切变化太快，我们才更需要退后一步，去识别那些正在固化成型的底层原则。诸如 RAG、反思、路由、记忆等模式，正在成为基本的构建模块。本书正是一份邀请，旨在引导大家一同审视这些核心思想，它们为我们未来的构建工作提供了必要的基础。我们正需要这样的时刻，来深入思考这些奠基性的模式。

---
## Introduction to the Frameworks Used | 本书使用的框架介绍

为了给代码示例提供具体的「画布」（亦可参阅附录），本书主要采用三个主流的智能体开发框架。<strong>LangChain</strong> 及其有状态扩展 <strong>LangGraph</strong>，提供了一种灵活的方式来将语言模型和其他组件链接在一起，为构建复杂的操作序列和图谱提供了一个鲁棒的画布；<strong>Crew AI</strong> 提供了一个专为编排多个 AI 智能体、角色和任务而设计的结构化框架，它扮演的画布角色尤其适合协作型智能体系统；<strong>谷歌智能体开发者套件（Google ADK）</strong> 则提供了用于构建、评估和部署智能体的工具与组件，这是另一块极具价值的画布，通常与谷歌的 AI 基础设施集成。

这些框架代表了智能体开发画布的不同侧面，各有其长处。通过展示跨越这些工具的示例，你将更广泛地理解，无论你为自己的智能体系统选择哪种具体的技术环境，这些模式都可以被应用。这些示例旨在清晰地阐明模式的核心逻辑及其在相应框架画布上的实现，重点突出清晰性和实用性。

在读完本书时，你不仅将理解 21 种关键智能体设计模式的基本理念，还将收获足以落地的实践知识与代码示例，助你在所选「画布」上高效应用这些模式，构建更智能、更强大、更具自主性的系统。让我们开始这段动手实践之旅吧！

---
